{"version":3,"file":"static/js/278.552db828.chunk.js","mappings":"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","sources":["components/GroupComponents/GroupExpenseForm.tsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\"\r\nimport { useNavigate } from \"react-router-dom\"\r\nimport GroupExpenseFormProps from \"../../types/GroupTypes/GroupExpenseFormProps\"\r\nimport WarningIcon from \"../../images/error-animation.gif\"\r\nimport ExpensesHistory from \"../../images/expenses-history.gif\"\r\nimport AddExpenseAnimation from \"../../images/add-expense-animation.gif\"\r\n\r\nconst GroupExpenseForm: React.FC<GroupExpenseFormProps> = ({\r\n  description,\r\n  amount,\r\n  selectedMemberId,\r\n  groupId,\r\n  groupMembers,\r\n  groupExpenses,\r\n  imageFileName,\r\n  handleDescriptionChange,\r\n  handleAmountChange,\r\n  handleSelectedMemberChange,\r\n  handleAddExpense,\r\n  handleImageChange,\r\n}) => {\r\n  const itemsPerPage = 4\r\n  const [currentPage, setCurrentPage] = useState(1)\r\n  const [currency, setCurrency] = useState<string>(\"\")\r\n  const navigate = useNavigate()\r\n\r\n  useEffect(() => {\r\n    const hash = window.location.hash\r\n    const currencyParamIndex = hash.indexOf(\"currency=\")\r\n\r\n    if (currencyParamIndex !== -1) {\r\n      const currencyParam = hash.slice(currencyParamIndex + \"currency=\".length)\r\n      setCurrency(decodeURIComponent(currencyParam))\r\n    }\r\n  }, [])\r\n\r\n  const handleNextPage = () => {\r\n    setCurrentPage(currentPage + 1)\r\n  }\r\n\r\n  const handlePreviousPage = () => {\r\n    setCurrentPage(currentPage - 1)\r\n  }\r\n\r\n  // Calculate which expenses to display based on the current page\r\n  const startIndex = (currentPage - 1) * itemsPerPage\r\n  const endIndex = startIndex + itemsPerPage\r\n\r\n  const expensesToDisplay = groupExpenses\r\n    .slice()\r\n    .sort((a, b) => b.timestamp - a.timestamp)\r\n    .slice(startIndex, endIndex)\r\n\r\n  const handleCustomUploadClick = () => {\r\n    document.getElementById(\"fileInput\")?.click()\r\n  }\r\n  const formatImageFileName = (fileName: string) => {\r\n    if (fileName && fileName.length > 14) {\r\n      const firstPart = fileName.slice(0, 10)\r\n      const lastPart = fileName.slice(-4)\r\n      return `${firstPart}...${lastPart}`\r\n    }\r\n    return fileName\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {groupMembers.length > 1 ? (\r\n        <div>\r\n          <div className=\"divider\" />\r\n          <div className=\"title-and-animation\">\r\n            <h2>Add expense</h2>\r\n            <img\r\n              src={AddExpenseAnimation}\r\n              alt=\"Add expense animation\"\r\n              width={50}\r\n              height={50}\r\n            />\r\n          </div>\r\n          <input\r\n            type=\"text\"\r\n            id=\"description-group\"\r\n            placeholder=\"Description\"\r\n            value={description}\r\n            onChange={handleDescriptionChange}\r\n            maxLength={50}\r\n          />\r\n          <input\r\n            type=\"number\"\r\n            placeholder=\"Amount\"\r\n            value={amount}\r\n            onChange={handleAmountChange}\r\n          />\r\n          <div style={{ margin: \"1rem\" }}>\r\n            <label style={{ margin: \"10px\" }}>Paid By: </label>\r\n            <select\r\n              className=\"currency\"\r\n              value={selectedMemberId}\r\n              onChange={handleSelectedMemberChange}\r\n              data-testid=\"selected-member\"\r\n            >\r\n              <option value=\"\">Select member</option>\r\n              {groupMembers\r\n                .filter((member) => member.name && member.name.trim() !== \"\")\r\n                .map((member) => (\r\n                  <option key={member.id} value={member.id}>\r\n                    {member.name}\r\n                  </option>\r\n                ))}\r\n            </select>\r\n          </div>\r\n          <div\r\n            className=\"custom-upload-button\"\r\n            onClick={handleCustomUploadClick}\r\n          >\r\n            <span>Upload Receipt</span>\r\n            <input\r\n              type=\"file\"\r\n              accept=\"image/*\"\r\n              id=\"fileInput\"\r\n              style={{ display: \"none\" }}\r\n              onChange={handleImageChange}\r\n            />\r\n          </div>\r\n          {imageFileName && (\r\n            <p>\r\n              Selected Image:{\" \"}\r\n              {formatImageFileName(imageFileName) || \"No image selected\"}\r\n            </p>\r\n          )}\r\n          <button\r\n            disabled={\r\n              description.trim() === \"\" ||\r\n              amount.trim() === \"\" ||\r\n              selectedMemberId === \"\"\r\n            }\r\n            onClick={handleAddExpense}\r\n          >\r\n            Add Expense\r\n          </button>\r\n          <div>\r\n            {expensesToDisplay.length > 0 && (\r\n              <>\r\n                <div className=\"divider\" />\r\n                <div className=\"title-and-animation\">\r\n                  <h2>Expenses History</h2>\r\n                  <img\r\n                    src={ExpensesHistory}\r\n                    alt=\"Expenses History\"\r\n                    width={50}\r\n                    height={50}\r\n                  />\r\n                </div>\r\n              </>\r\n            )}\r\n            <ul className=\"expense-list\">\r\n              {expensesToDisplay.map((expense) => (\r\n                <li key={expense.id} className=\"expense-item\">\r\n                  <p>Description: {expense.description}</p>\r\n                  <p>\r\n                    Amount:{\" \"}\r\n                    {new Intl.NumberFormat(undefined, {\r\n                      minimumFractionDigits: 0,\r\n                      maximumFractionDigits: 3,\r\n                    }).format(expense.amount)}{\" \"}\r\n                    {currency}\r\n                  </p>\r\n                  <p>Paid By: {expense.payerName}</p>\r\n                  <button\r\n                    onClick={() =>\r\n                      navigate(\r\n                        `/expense-details/${groupId}/${expense.id}?currency=${currency}`\r\n                      )\r\n                    }\r\n                  >\r\n                    Details\r\n                  </button>\r\n                </li>\r\n              ))}\r\n            </ul>\r\n            {groupExpenses.length > itemsPerPage && (\r\n              <div className=\"pagination\">\r\n                <button\r\n                  onClick={handlePreviousPage}\r\n                  disabled={currentPage === 1}\r\n                >\r\n                  {\"<\"}\r\n                </button>\r\n                <span>Page {currentPage}</span>\r\n                <button\r\n                  onClick={handleNextPage}\r\n                  disabled={endIndex >= groupExpenses.length}\r\n                >\r\n                  {\">\"}\r\n                </button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        <div\r\n          style={{\r\n            display: \"flex\",\r\n            flexDirection: \"row\",\r\n            alignItems: \"center\",\r\n            justifyContent: \"center\",\r\n            gap: \"0.5rem\",\r\n          }}\r\n        >\r\n          <p style={{ color: \"#ff0000bd\" }}>\r\n            You need atleast 2 members to add an expense.\r\n          </p>\r\n          <img src={WarningIcon} alt=\"Loading\" width={25} height={25} />\r\n        </div>\r\n      )}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default GroupExpenseForm\r\n"],"names":["_ref","description","amount","selectedMemberId","groupId","groupMembers","groupExpenses","imageFileName","handleDescriptionChange","handleAmountChange","handleSelectedMemberChange","handleAddExpense","handleImageChange","_useState","useState","_useState2","_slicedToArray","currentPage","setCurrentPage","_useState3","_useState4","currency","setCurrency","navigate","useNavigate","useEffect","hash","window","location","currencyParamIndex","indexOf","currencyParam","slice","decodeURIComponent","startIndex","endIndex","expensesToDisplay","sort","a","b","timestamp","_jsx","_Fragment","children","length","_jsxs","className","src","AddExpenseAnimation","alt","width","height","type","id","placeholder","value","onChange","maxLength","style","margin","filter","member","name","trim","map","onClick","_document$getElementB","document","getElementById","click","accept","display","fileName","firstPart","lastPart","concat","formatImageFileName","disabled","ExpensesHistory","expense","Intl","NumberFormat","undefined","minimumFractionDigits","maximumFractionDigits","format","payerName","flexDirection","alignItems","justifyContent","gap","color","WarningIcon"],"sourceRoot":""}