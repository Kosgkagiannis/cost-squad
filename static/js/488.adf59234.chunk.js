"use strict";(self.webpackChunkcost_squad=self.webpackChunkcost_squad||[]).push([[488],{5248:function(e,t,n){n.r(t),n.d(t,{default:function(){return l}});var a=n(4165),r=n(5861),c=n(9439),o=n(2791),s=n(2481),i=n(9996),d=n.p+"static/media/settings.25c5651086411fa5d61b.png",u=n(184),l=function(e){var t=e.groupTitle,n=e.originalGroupName,l=e.newGroupName,m=e.groupId,h=e.onGroupNameChange,p=e.handleUpdateGroupName,f=e.onDeleteGroup,x=(0,o.useState)(!1),g=(0,c.Z)(x,2),b=g[0],v=g[1],j=(0,o.useState)(!1),y=(0,c.Z)(j,2),w=y[0],k=y[1],N=(0,o.useState)([]),C=(0,c.Z)(N,2),S=C[0],Z=C[1],I=(0,o.useState)(!1),L=(0,c.Z)(I,2),q=L[0],E=L[1],G=(0,o.useState)(""),D=(0,c.Z)(G,2),T=D[0],A=D[1];(0,o.useEffect)((function(){var e=window.location.hash,t=e.indexOf("currency=");if(-1!==t){var n=e.slice(t+9);A(decodeURIComponent(n))}}),[]);var B=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(){var t,n,r,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,m){e.next=4;break}return console.error("groupId is undefined"),e.abrupt("return");case 4:return t=(0,s.hJ)(i.db,"activityLogs"),n=(0,s.IO)(t,(0,s.ar)("groupId","==",m)),e.next=8,(0,s.PL)(n);case 8:r=e.sent,(c=r.docs.map((function(e){return e.data()}))).sort((function(e,t){return t.timestamp.seconds-e.timestamp.seconds})),Z(c),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.error("Error fetching activity logs:",e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(q){e.next=6;break}return document.body.classList.add("no-scroll"),e.next=4,B();case 4:e.next=7;break;case 6:document.body.classList.remove("no-scroll");case 7:E(!q),k(!1);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(e){var t,n=(t=e.timestamp,new Date(1e3*t.seconds+t.nanoseconds/1e6).toLocaleString());switch(e.action){case"MemberAdded":return'The user with email "'.concat(e.addedBy,'" added a member called "').concat(e.memberName,'" at ').concat(n,".");case"MemberDeleted":return'The user with email "'.concat(e.deletedBy,'" deleted a member called "').concat(e.memberName,'" at ').concat(n,".");case"ExpenseAdded":return'The user with email "'.concat(e.addedBy,'" added an expense of ').concat(e.amount," ").concat(T," at ").concat(n,".");case"ExpenseDeleted":return'The user with email "'.concat(e.deletedBy,'" deleted an expense of ').concat(e.amount," ").concat(T," at ").concat(n,".");default:return"Unknown log action"}};return(0,u.jsx)("div",{children:(0,u.jsxs)("div",{className:"top-delete-button",children:[(0,u.jsx)("h1",{"data-testid":"group-name-title",className:"group-title",children:t||"Group Name"}),q&&(0,u.jsx)("div",{className:"modal-activity-log",children:(0,u.jsxs)("div",{className:"modal-activity-log-main",children:[(0,u.jsx)("button",{style:{position:"absolute",right:"5px",top:"-10px"},onClick:U,children:"X"}),S.length>0?(0,u.jsxs)("h3",{children:["Activity Logs for ",t]}):(0,u.jsx)("h3",{children:"No activity recorded yet."}),(0,u.jsx)("ul",{children:S.map((function(e,t){return(0,u.jsxs)("div",{children:[(0,u.jsx)("li",{children:M(e)}),(0,u.jsx)("br",{})]},t)}))})]})}),(0,u.jsxs)("div",{className:"menu-icon",onClick:function(){k(!w)},children:[(0,u.jsx)("img",{width:30,height:30,src:d,alt:"Settings Icon",style:{cursor:"pointer",transition:"transform 0.3s ease-in-out",transform:w?"rotate(90deg)":"rotate(0deg)"}}),w&&(0,u.jsxs)("div",{className:"menu-dropdown",onClick:function(e){e.stopPropagation()},children:[(0,u.jsxs)("p",{children:["Squad ID: ",m]}),(0,u.jsx)("button",{onClick:U,children:"Show Activity Logs"}),b?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("h2",{style:{marginInline:"0.2rem"},children:"Edit Squad Name"}),(0,u.jsx)("input",{type:"text",placeholder:"Enter New Group Name","data-testid":"group-name-input",value:b?l:n,onChange:h,maxLength:20,style:{width:"unset",marginInline:"0.3rem"}}),(0,u.jsx)("button",{onClick:function(){p(),k(!1),v(!1)},disabled:""===l.trim(),children:"Update Squad Name"}),(0,u.jsx)("button",{onClick:function(){v(!1)},children:"Cancel"})]}):(0,u.jsx)("button",{onClick:function(){return v(!0)},children:"Edit Squad Name"}),(0,u.jsx)("button",{onClick:f,style:{backgroundColor:"#ff0000bd",color:"#ffffffed"},children:"Delete Squad"})]})]})]})})}}}]);
//# sourceMappingURL=488.adf59234.chunk.js.map